<div class="p-6">
  <!-- Section Header -->
  <div id="section-header" class="flex items-center gap-2 mb-6">
    <div id="section-icon" class="w-14 h-14 flex items-center justify-center bg-blue-100 rounded-full">
      <i nz-icon nzType="lock" nzTheme="outline" class="text-2xl text-blue-500"></i>
    </div>
  </div>

  <!-- Title -->
  <h2 id="title" class="text-xl font-semibold mt-2">Change Password</h2>
  <p id="description" class="text-sm text-gray-600 mb-4">
    To change your password, please fill in the fields below. Your password must contain <br />
    at least 6 characters, one uppercase, one lowercase, one number and one special character.
  </p>

  <form [formGroup]="passwordForm" id="password-form" class="space-y-4">
    <!-- Current Password -->
    <div id="current-password-section">
      <label for="currentPassword" class="font-medium block">Current Password</label>
      <div class="flex flex-col gap-1">
        <nz-input-group [nzSuffix]="suffixTemplate1" [nzSize]="'large'" class="my-2 w-full">
          <input
            id="currentPassword"
            [type]="passwordVisible1 ? 'text' : 'password'"
            nz-input
            placeholder="Current Password"
            formControlName="currentPassword"
            nzSize="large"
            class="w-full"
          />
        </nz-input-group>
        <ng-template #suffixTemplate1>
          <nz-icon
            id="toggle-currentPassword"
            class="ant-input-password-icon"
            [nzType]="passwordVisible1 ? 'eye-invisible' : 'eye'"
            (click)="passwordVisible1 = !passwordVisible1"
          />
        </ng-template>

        <div class="flex justify-between items-center w-full">
          @if(passwordForm.get('currentPassword')?.touched && passwordForm.get('currentPassword')?.errors) {
            <div id="currentPassword-error" class="text-red-500 text-sm">
              @if(passwordForm.get('currentPassword')?.errors?.['required']) {
                Current password is required.
              }
              @if(passwordForm.get('currentPassword')?.errors?.['minlength']) {
                Must be at least 6 characters.
              }
              @if(passwordForm.get('currentPassword')?.errors?.['pattern']) {
                Must include uppercase, lowercase, number & special char.
              }
            </div>
          }
          <a id="forgot-password-link" class="text-blue-500 text-sm cursor-pointer">forgot password?</a>
        </div>
      </div>
    </div>

    <!-- New Password -->
    <div id="new-password-section">
      <label for="newPassword" class="font-medium block">New Password</label>
      <nz-input-group [nzSuffix]="suffixTemplate2" [nzSize]="'large'" class="my-2 w-full">
        <input
          id="newPassword"
          [type]="passwordVisible2 ? 'text' : 'password'"
          nz-input
          placeholder="New Password"
          formControlName="newPassword"
          nzSize="large"
          class="w-full"
        />
      </nz-input-group>
      <ng-template #suffixTemplate2>
        <nz-icon
          id="toggle-newPassword"
          class="ant-input-password-icon"
          [nzType]="passwordVisible2 ? 'eye-invisible' : 'eye'"
          (click)="passwordVisible2 = !passwordVisible2"
        />
      </ng-template>

      @if(passwordForm.get('newPassword')?.touched && passwordForm.get('newPassword')?.errors) {
        <div id="newPassword-error" class="text-red-500 text-sm">
          @if(passwordForm.get('newPassword')?.errors?.['required']) {
            New password is required.
          }
          @if(passwordForm.get('newPassword')?.errors?.['minlength']) {
            Must be at least 6 characters.
          }
          @if(passwordForm.get('newPassword')?.errors?.['pattern']) {
            Must include uppercase, lowercase, number & special char.
          }
        </div>
      }
    </div>

    <!-- Confirm Password -->
    <div id="confirm-password-section">
      <label for="confirmPassword" class="font-medium block">Confirm Password</label>
      <nz-input-group [nzSuffix]="suffixTemplate3" [nzSize]="'large'" class="my-2 w-full">
        <input
          id="confirmPassword"
          [type]="passwordVisible3 ? 'text' : 'password'"
          nz-input
          placeholder="Confirm Password"
          formControlName="confirmPassword"
          nzSize="large"
          class="w-full"
        />
      </nz-input-group>
      <ng-template #suffixTemplate3>
        <nz-icon
          id="toggle-confirmPassword"
          class="ant-input-password-icon"
          [nzType]="passwordVisible3 ? 'eye-invisible' : 'eye'"
          (click)="passwordVisible3 = !passwordVisible3"
        />
      </ng-template>

      @if(passwordForm.get('confirmPassword')?.touched && passwordForm.get('confirmPassword')?.errors) {
        <div id="confirmPassword-error" class="text-red-500 text-sm">
          @if(passwordForm.get('confirmPassword')?.errors?.['required']) {
            Confirm password is required.
          }
        </div>
      }

      @if(passwordForm.errors?.['passwordMismatch'] && passwordForm.get('confirmPassword')?.touched) {
        <div id="passwordMismatch-error" class="text-red-500 text-sm">
          Passwords do not match.
        </div>
      }
    </div>

    <!-- Submit Button -->
    <button
      id="submit-btn"
      nz-button
      nzType="primary"
      class="w-full mt-4 py-2 rounded-md"
      (click)="changePassword()"
      nzSize="large"
    >
      Change Password
    </button>
  </form>
</div>
